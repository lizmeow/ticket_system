# Design Document

## Ticket System Design

## 1. Problem Statement

A ticket system is important to improve communication 
(internally within a group or with customers), prioritize issues, 
provide data on the frequency of repeated issues and other trends, 
and to resolve issues as efficiently as possible.  

I want to create a simple ticket system service that 
allows users in a small team to manage tasks. I want to allow users 
to document issues, assign an issue to the appropriate user, 
see tickets they have created, see tickets assigned to them, 
and resolve tickets that are assigned to them.


## 2. Top Questions to Resolve in Review


1. Using dynamo DB (no relational database) vs using relational 
database - what are the tradeoffs? Dynamo DB offers flexibility 
as data requirements evolve (eg, if you want to add another column). 
Relational databases offer better support for complex queries 
and data integrity.   
2. Using Spring boot for a backend is an appealing option to 
streamline code flow and minimize redundancy. I want to build 
an initial iteration without Spring boot for practice, then 
ideally use Spring boot to get a better sense of what it is 
doing behind the hood.   

## 3. Use Cases

U1. As a user, I want to create a new ticket to report an 
issue with a given description (including short and long descriptions) 
and a given target user who will be responsible for resolving the 
ticket.

U2. As a user, I want to be able to retrieve all tickets I created.*
    
U3. As a user, I want to be able to retrieve the 
ticket with a specific ID.

U4. As a user, I want to retrieve all tickets that 
have been assigned to me.

U5. As a user, I want to update a ticket that has been 
assigned to me with a “resolution text”, and update the state 
from “open” to “closed”.

U6. As a user, I want to list all the users.

## 4. Project Scope

### 4.1. In Scope

-Creating tickets, retrieving tickets,
and updating tickets as resolved.

-Retrieving the list of users.

-Minimal frontend.

### 4.2. Out of Scope

-Authentication.

-Security.

-Adding or deleting users.

-Tickets could be assigned to a group, and
users could be associated with certain groups,
which would scale better with the number of users.
For example, I know my ticket should be assigned to
the “sales” group, and the service picks a user in the
sales group who is responsible for resolving the ticket.

-Updating the ticket short description or the ticket long description.

-Drop down menus or autocomplete in the front end.

-Deleting tickets.

# 5. Proposed Architecture Overview

I will use API Gateway and Lambda to create 6 endpoints (CreateTicket, GetUsers, UpdateTicket, GetTicketsAssignedToUser, GetTicketsCreatedByUser, GetTicket) to satisfy our requirements.

I will store tickets in a table in DynamoDB and store users in a table in DynamoDB.

TicketSystemService will have a web interface for users to create tickets, see the tickets assigned to them, see the tickets they have created, look up a ticket by id, and to see all users.


# 6. API

https://ticketsystembucket3.s3.us-west-2.amazonaws.com/index.html

## 6.1. Public Models
TicketModel:


String ticket_id;\
String short_description;\
String long_description;\
String creation_date;\
String created_by;\
String assigned_to;\
String state;\
String resolution_text;

UserModel:

String user_id;\
String name;\

## 6.2. Get users endpoint:

-Accept GET requests to /users\
-Retrieve all users


## 6.3. Create ticket endpoint:

-Accept POST requests to /tickets/users/:id/create\
-Accept data to create a new ticket with a short description, 
a long description, and the user id of who will resolve the 
ticket. Return the new ticket, which includes a unique ticket 
id generated by the service, and the creation date. 
The state of this ticket will be “open”.\
-If the ticket does not contain a long description,\ 
throw an “invalidLongDescriptionException”\
-If the ticket does not contain a short description. 
Throw an “invalidShortDescriptionException”\
-If the user id of the person meant to resolve the ticket
is not found, throw a “userIdNotFoundException”


## 6.4. Get tickets assigned to a user endpoint:

-Accept a GET request to /tickets/users/:id/resolve\
-Accept the user id and return the corresponding 
tickets assigned to this user id\
-If the user id does not exist, throw a 
“userIdNotFoundException”

## 6.5. Get tickets created by a user endpoint:

-Accept a GET request to /tickets/users/:id/create\
-Accept the user id and return the corresponding 
tickets created by this user id
-If the user id is not found, throw a 
“userIdNotFoundException”

## 6.6. Update tickets endpoint:

Update tickets endpoint:

-Accept a PUT request to /tickets/:id\
-Accept data to update this ticket including 
ticket id, a resolution text, and changing the 
state from “open” to “closed”. Return the updated ticket.\
-If the ticket id is not found, 
throw a “ticketIdNotFoundException”\
-If the resolution text is empty, 
throw a “invalidResolutionException”\
-If the state of the ticket does not change from 
“open” to “closed”, throw an 
“invalidResolutionStateException”

## 6.7. Update tickets endpoint:

-Accept a GET request to /tickets/:id\
-Accept a ticket id and return the ticket\
-If the ticket id is not found, throw a 
“ticketIdNotFoundException”


# 7. Tables

Tickets

ticket_id // partition key, string\
Issue // string\
Description // string\
creation_date // string\
Created_by // string\
Assigned_to  // string\
State // string\
Resolution Text // string\

Users

User_id // partition key, string\
Name // string\


# 8. Pages

The home page for a user will have the following options to link to other pages:

-Tickets created by me\
-Tickets assigned ot me\
-Lookup by id (user can supply a lookup by id)\
-Create ticket\
-List Users\

Clicking on the “tickets created by me” will list all tickets 
created by this user. The user can click on a ticket and go to the 
Ticket page which has this ticket’s information. If the ticket is 
not yet resolved, the fields Resolution and State can be filled in. 
If the ticket is resolved, no fields can be changed. A “done” button 
will be in the lower right corner to link back to the home page for 
this user.

Clicking on “tickets assigned to me” will list all tickets assigned 
to this user. The user can click on a ticket and go to  the Ticket 
page which has this ticket’s information. If the ticket is not yet 
resolved, the fields Resolution and State can be filled in. If the 
ticket is resolved, no fields can be changed. A “done” button will 
be in the lower right corner to link back to the home page for this 
user.

Clicking on “create ticket” will open a page where fields “short 
description”, “long description”, and “assigned to” can be filled 
in. The user can click on a “create” button to create the ticket, 
which will link to the Ticket page for this newly created ticket. 
A “done” button will be in the lower right corner to link back to 
the home page for this user.

Clicking on the “list users” will open a page that lists all the 
users (id, name, and email). A “done” button will be in the lower 
right corner to link back to the home page for this user.

![IMG_2434.jpg](..%2F..%2F..%2F..%2FDownloads%2FIMG_2434.jpg)